#ifndef BIGDIGITS_H
#define BIGDIGITS_H

#include <LiquidCrystal_I2C.h>

class BigDigits {
  LiquidCrystal_I2C &lcd;

  // Digit patterns: digits[digit][quadrant][8 rows]
  static const byte digits[10][4][8];

  // Colon 1x2
  static const byte colon[8];

public:
  BigDigits(LiquidCrystal_I2C &l) : lcd(l) {}

  // Display digit at top-left of a 2x2 character block
  // baseSlot: 0â€“7, to avoid overwriting other characters
  void display(int digit, int col, int row, int baseSlot) {
    for (int q = 0; q < 4; q++) {
      byte temp[8];
      for (int i = 0; i < 8; i++) temp[i] = digits[digit][q][i];
      lcd.createChar(baseSlot + q, temp);
    }

    lcd.setCursor(col, row);
    lcd.write(byte(baseSlot));
    lcd.write(byte(baseSlot + 1));

    lcd.setCursor(col, row + 1);
    lcd.write(byte(baseSlot + 2));
    lcd.write(byte(baseSlot + 3));
  }

  // Display colon (1x2)
  void displayColon(int col, int row, int slot) {
    byte temp[8];
    for (int i = 0; i < 8; i++) temp[i] = colon[i];
    lcd.createChar(slot, temp);

    lcd.setCursor(col, row);
    lcd.write(byte(slot));
    lcd.setCursor(col, row + 1);
    lcd.write(byte(slot));
  }
};

// --- Digit bitmaps ---
const byte BigDigits::digits[10][4][8] = {
  // 0
  { {B00111,B01111,B11100,B11000,B11000,B11000,B11000,B11000},
    {B11100,B11110,B00111,B00011,B00011,B00011,B00011,B00011},
    {B11000,B11000,B11000,B11000,B11000,B11100,B01111,B00111},
    {B00011,B00011,B00011,B00011,B00011,B00111,B11110,B11100} },
  // 1
  { {B00001,B00011,B00111,B01111,B11101,B11001,B00001,B00001},
    {B10000,B10000,B10000,B10000,B10000,B10000,B10000,B10000},
    {B00001,B00001,B00001,B00001,B00001,B00001,B11111,B11111},
    {B10000,B10000,B10000,B10000,B10000,B10000,B11111,B11111} },
  // 2
  { {B00111,B01111,B11100,B11000,B00000,B00000,B00000,B00000},
    {B11100,B11110,B00111,B00011,B00011,B00111,B01110,B11100},
    {B00001,B00011,B00111,B01110,B11100,B11000,B11111,B11111},
    {B11000,B10000,B00000,B00000,B00000,B00000,B11111,B11111} },
  // 3
  { {B00111,B01111,B11100,B11000,B00000,B00000,B00000,B00011},
    {B11100,B11110,B00111,B00011,B00011,B00111,B01110,B11100},
    {B00011,B00000,B00000,B00000,B11000,B11100,B01111,B00111},
    {B11100,B01110,B00111,B00011,B00011,B00111,B11110,B11100} },
  // 4
  { {B00000,B00000,B00001,B00011,B00111,B01110,B11100,B11111},
    {B01100,B11100,B11100,B11100,B01100,B01100,B01100,B01100},
    {B11111,B00000,B00000,B00000,B00000,B00000,B00000,B00000},
    {B11111,B01100,B01100,B01100,B01100,B01100,B01100,B01100} },
  // 5
  { {B11111,B11111,B11000,B11000,B11000,B11000,B11000,B11111},
    {B11111,B11111,B00000,B00000,B00000,B00000,B00000,B11100},
    {B11111,B00000,B00000,B00000,B11000,B11100,B01111,B00111},
    {B11110,B00111,B00011,B00011,B00011,B00111,B11110,B11100} },
  // 6
  { {B00111,B01111,B11100,B11000,B11000,B11000,B11000,B11111},
    {B11100,B11110,B00111,B00011,B00000,B00000,B00000,B11100},
    {B11111,B11100,B11000,B11000,B11000,B11100,B01111,B00111},
    {B11110,B00111,B00011,B00011,B00011,B00111,B11110,B11100} },
  // 7
  { {B11111,B11111,B00000,B00000,B00000,B00000,B00000,B00000},
    {B11111,B11111,B00111,B00111,B01110,B01110,B11100,B11100},
    {B00001,B00001,B00011,B00011,B00111,B00111,B01110,B01110},
    {B11000,B11000,B10000,B10000,B00000,B00000,B00000,B00000} },
  // 8
  { {B00111,B01111,B11100,B11000,B11000,B11100,B01110,B00111},
    {B11100,B11110,B00111,B00011,B00011,B00111,B01110,B11100},
    {B00111,B01110,B11100,B11000,B11000,B11100,B01111,B00111},
    {B11100,B01110,B00111,B00011,B00011,B00111,B11110,B11100} },
  // 9
  { {B00111,B01111,B11100,B11000,B11000,B11000,B11100,B01111},
    {B11100,B11110,B00111,B00011,B00011,B00011,B00111,B11111},
    {B00111,B00000,B00000,B00000,B11000,B11100,B01111,B00111},
    {B11111,B00011,B00011,B00011,B00011,B00111,B11110,B11100} }
};

// --- Colon bitmap ---
const byte BigDigits::colon[8] = {
  B00000,
  B00000,
  B01110,
  B11111,
  B11111,
  B01110,
  B00000,
  B00000
};

#endif